{"version":3,"sources":["webpack://feathers.memory/webpack/universalModuleDefinition","webpack://feathers.memory/webpack/bootstrap","webpack://feathers.memory/./lib/index.js","webpack://feathers.memory/./node_modules/@feathersjs/commons/lib/arguments.js","webpack://feathers.memory/./node_modules/@feathersjs/commons/lib/commons.js","webpack://feathers.memory/./node_modules/@feathersjs/commons/lib/filter-query.js","webpack://feathers.memory/./node_modules/@feathersjs/commons/lib/hooks.js","webpack://feathers.memory/./node_modules/@feathersjs/commons/lib/utils.js","webpack://feathers.memory/./node_modules/@feathersjs/errors/lib/index.js","webpack://feathers.memory/./node_modules/base64-js/index.js","webpack://feathers.memory/./node_modules/buffer/index.js","webpack://feathers.memory/./node_modules/buffer/node_modules/isarray/index.js","webpack://feathers.memory/./node_modules/clone-deep/index.js","webpack://feathers.memory/./node_modules/debug/src/browser.js","webpack://feathers.memory/./node_modules/debug/src/debug.js","webpack://feathers.memory/./node_modules/ieee754/index.js","webpack://feathers.memory/./node_modules/kind-of/index.js","webpack://feathers.memory/./node_modules/ms/index.js","webpack://feathers.memory/./node_modules/process/browser.js","webpack://feathers.memory/./node_modules/shallow-clone/index.js","webpack://feathers.memory/./node_modules/sift/sift.js","webpack://feathers.memory/./node_modules/uberproto/lib/proto.js","webpack://feathers.memory/(webpack)/buildin/global.js"],"names":["Proto","require","errors","cloneDeep","sorter","select","filterQuery","_","sift","_select","base","result","Service","options","paginate","_id","id","idField","_uId","startId","store","events","_matcher","matcher","_sorter","obj","extend","params","getFilter","query","filters","map","values","filter","total","length","$sort","sort","$skip","slice","$limit","Promise","resolve","limit","skip","data","_find","default","then","page","reject","NotFound","current","Array","isArray","all","_create","oldId","BadRequest","_update","omit","_patch","deleted","_remove","module","exports","init","paramCounts","find","get","create","update","patch","remove","isObjectOrArray","value","validateArguments","method","args","Error","methodParamCount","undefined","utils","hooks","Object","assign","PROPERTIES","parse","number","Math","abs","parseInt","getLimit","lower","upper","max","Number","MAX_VALUE","min","convertSort","keys","forEach","key","$select","$populate","each","pick","SKIP","Symbol","convertGetOrRemove","convertUpdateOrPatch","converters","createHookObject","hook","defineProperty","path","app","service","services","defaultMakeArguments","push","makeArguments","convertHookData","isHookObject","hookObject","type","getHooks","appLast","appHooks","__hooks","serviceHooks","concat","processHooks","initialHookObject","updateCurrentHook","promise","fn","bind","error","catch","enableHooks","methods","types","allHooks","indexOf","myHooks","apply","stripSlashes","name","replace","callback","isObject","some","val","every","isMatch","item","isEmpty","source","merge","target","fields","otherFields","convert","first","second","comparator","modifier","isPromise","makeUrl","env","host","process","HOST_NAME","protocol","PORT","port","debug","FeathersError","msg","code","className","message","newData","JSON","stringify","captureStackTrace","stack","inheritsFrom","Child","Parent","prototype","constructor","call","NotAuthenticated","PaymentError","Forbidden","MethodNotAllowed","NotAcceptable","Timeout","Conflict","LengthRequired","Unprocessable","TooManyRequests","GeneralError","NotImplemented","BadGateway","Unavailable","byteLength","toByteArray","fromByteArray","lookup","revLookup","Arr","Uint8Array","i","len","charCodeAt","getLens","b64","validLen","placeHoldersLen","lens","_byteLength","tmp","arr","curByte","tripletToBase64","num","encodeChunk","uint8","start","end","output","join","extraBytes","parts","maxChunkLength","len2","base64","ieee754","Buffer","SlowBuffer","INSPECT_MAX_BYTES","TYPED_ARRAY_SUPPORT","global","typedArraySupport","kMaxLength","__proto__","foo","subarray","e","createBuffer","that","RangeError","arg","encodingOrOffset","allocUnsafe","from","poolSize","_augment","TypeError","ArrayBuffer","fromArrayBuffer","fromString","fromObject","species","configurable","assertSize","size","alloc","fill","encoding","checked","allocUnsafeSlow","string","isEncoding","actual","write","fromArrayLike","array","byteOffset","isBuffer","copy","buffer","isnan","toString","b","_isBuffer","compare","a","x","y","String","toLowerCase","list","pos","buf","isView","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","n","m","swap16","swap32","swap64","arguments","equals","inspect","str","match","thisStart","thisEnd","thisCopy","targetCopy","bidirectionalIndexOf","dir","isNaN","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","read","readUInt16BE","foundIndex","found","j","includes","hexWrite","offset","remaining","strLen","parsed","substr","utf8Write","blitBuffer","asciiWrite","asciiToBytes","latin1Write","base64Write","ucs2Write","utf16leToBytes","isFinite","toJSON","_arr","res","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","decodeCodePointsArray","MAX_ARGUMENTS_LENGTH","codePoints","fromCharCode","ret","out","toHex","bytes","newBuf","sliceLen","checkOffset","ext","readUIntLE","noAssert","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","checkInt","writeUIntLE","maxBytes","writeUIntBE","writeUInt8","floor","objectWriteUInt16","littleEndian","writeUInt16LE","writeUInt16BE","objectWriteUInt32","writeUInt32LE","writeUInt32BE","writeIntLE","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","checkIEEE754","writeFloat","writeFloatLE","writeFloatBE","writeDouble","writeDoubleLE","writeDoubleBE","targetStart","set","INVALID_BASE64_RE","base64clean","stringtrim","trim","units","Infinity","leadSurrogate","byteArray","c","hi","lo","src","dst","clone","typeOf","instanceClone","cloneObjectDeep","cloneArrayDeep","log","formatArgs","save","load","useColors","storage","chrome","local","localstorage","colors","window","navigator","userAgent","document","documentElement","style","WebkitAppearance","console","firebug","exception","table","RegExp","$1","formatters","v","err","namespace","humanize","diff","color","splice","index","lastC","Function","namespaces","removeItem","r","DEBUG","enable","localStorage","createDebug","coerce","disable","enabled","instances","names","skips","selectColor","hash","prevTime","self","curr","Date","ms","prev","unshift","format","formatter","logFn","destroy","split","instance","test","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","d","s","NaN","rt","LN2","kindOf","isGeneratorFn","isArguments","isDate","isError","isRegexp","ctorName","isGeneratorObj","stackTraceLimit","toDateString","getDate","setDate","flags","ignoreCase","multiline","throw","return","next","callee","h","long","fmtLong","fmtShort","exec","parseFloat","round","plural","ceil","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","setTimeout","clearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","timeout","run","nextTick","Item","title","browser","argv","version","versions","noop","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","umask","valueOf","deep","Map","Set","cloneBuffer","cloneSymbol","cloneArrayBuffer","cloneTypedArray","cloneRegExp","re","lastIndex","isFunction","comparable","getTime","or","validator","and","validate","k","o","OPERATORS","$eq","$ne","$gt","$gte","$lt","$lte","$mod","$in","comparableB","createRootValidator","$nin","$not","$type","$all","$and","$size","$or","$nor","$regex","$where","$elemMatch","search","$exists","hasOwnProperty","prepare","$options","createValidator","nestedValidator","findValues","nv","keypath","object","createNestedValidator","isVanillaObject","validators","getter","use","plugin","root","factory","define","HAS_SYMBOLS","getOwnPropertySymbols","makeSuper","_super","old","newMethod","__init","mixin","prop","fnTest","getPrototypeOf","descriptors","proto","processProperty","getOwnPropertyDescriptor","getOwnPropertyNames","processDescriptor","descriptor","proxy","g","eval"],"mappings":"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","file":"feathers-memory.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"memory\"] = factory();\n\telse\n\t\troot[\"feathers\"] = root[\"feathers\"] || {}, root[\"feathers\"][\"memory\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./lib/index.js\");\n","const Proto = require('uberproto');\nconst errors = require('@feathersjs/errors');\nconst cloneDeep = require('clone-deep');\n\nconst { sorter, select, filterQuery, _ } = require('@feathersjs/commons');\n\nconst sift = require('sift');\n\nconst _select = (...args) => {\n  const base = select(...args);\n\n  return function (result) {\n    return base(cloneDeep(result));\n  };\n};\n\nclass Service {\n  constructor (options = {}) {\n    this.paginate = options.paginate || {};\n    this._id = this.id = options.idField || options.id || 'id';\n    this._uId = options.startId || 0;\n    this.store = options.store || {};\n    this.events = options.events || [];\n    this._matcher = options.matcher;\n    this._sorter = options.sorter || sorter;\n  }\n\n  extend (obj) {\n    return Proto.extend(obj, this);\n  }\n\n  // Find without hooks and mixins that can be used internally and always returns\n  // a pagination object\n  _find (params, getFilter = filterQuery) {\n    const { query, filters } = getFilter(params.query || {});\n    const map = _select(params);\n    let values = _.values(this.store);\n\n    if (this._matcher) {\n      values = values.filter(this._matcher(query));\n    } else {\n      values = sift(query, values);\n    }\n\n    const total = values.length;\n\n    if (filters.$sort) {\n      values.sort(this._sorter(filters.$sort));\n    }\n\n    if (filters.$skip) {\n      values = values.slice(filters.$skip);\n    }\n\n    if (typeof filters.$limit !== 'undefined') {\n      values = values.slice(0, filters.$limit);\n    }\n\n    return Promise.resolve({\n      total,\n      limit: filters.$limit,\n      skip: filters.$skip || 0,\n      data: map(values)\n    });\n  }\n\n  find (params) {\n    const paginate = typeof params.paginate !== 'undefined' ? params.paginate : this.paginate;\n    // Call the internal find with query parameter that include pagination\n    const result = this._find(params, query => filterQuery(query, paginate));\n\n    if (!(paginate && paginate.default)) {\n      return result.then(page => page.data);\n    }\n\n    return result;\n  }\n\n  get (id, params) {\n    if (id in this.store) {\n      return Promise.resolve(this.store[id])\n        .then(_select(params, this.id));\n    }\n\n    return Promise.reject(\n      new errors.NotFound(`No record found for id '${id}'`)\n    );\n  }\n\n  // Create without hooks and mixins that can be used internally\n  _create (data, params) {\n    let id = data[this._id] || this._uId++;\n    let current = _.extend({}, data, { [this._id]: id });\n\n    return Promise.resolve((this.store[id] = current))\n      .then(_select(params, this.id));\n  }\n\n  create (data, params) {\n    if (Array.isArray(data)) {\n      return Promise.all(data.map(current => this._create(current)));\n    }\n\n    return this._create(data, params);\n  }\n\n  // Update without hooks and mixins that can be used internally\n  _update (id, data, params) {\n    if (id in this.store) {\n      // We don't want our id to change type if it can be coerced\n      const oldId = this.store[id][this._id];\n\n      id = oldId == id ? oldId : id; // eslint-disable-line\n\n      data = _.extend({}, data, { [this._id]: id });\n      this.store[id] = data;\n\n      return Promise.resolve(this.store[id])\n        .then(_select(params, this.id));\n    }\n\n    return Promise.reject(\n      new errors.NotFound(`No record found for id '${id}'`)\n    );\n  }\n\n  update (id, data, params) {\n    if (id === null || Array.isArray(data)) {\n      return Promise.reject(new errors.BadRequest(\n        `You can not replace multiple instances. Did you mean 'patch'?`\n      ));\n    }\n\n    return this._update(id, data, params);\n  }\n\n  // Patch without hooks and mixins that can be used internally\n  _patch (id, data, params) {\n    if (id in this.store) {\n      _.extend(this.store[id], _.omit(data, this._id));\n\n      return Promise.resolve(this.store[id])\n        .then(_select(params, this.id));\n    }\n\n    return Promise.reject(\n      new errors.NotFound(`No record found for id '${id}'`)\n    );\n  }\n\n  patch (id, data, params) {\n    if (id === null) {\n      return this._find(params).then(page => {\n        return Promise.all(page.data.map(\n          current => this._patch(current[this._id], data, params))\n        );\n      });\n    }\n\n    return this._patch(id, data, params);\n  }\n\n  // Remove without hooks and mixins that can be used internally\n  _remove (id, params) {\n    if (id in this.store) {\n      const deleted = this.store[id];\n      delete this.store[id];\n\n      return Promise.resolve(deleted)\n        .then(_select(params, this.id));\n    }\n\n    return Promise.reject(\n      new errors.NotFound(`No record found for id '${id}'`)\n    );\n  }\n\n  remove (id, params) {\n    if (id === null) {\n      return this._find(params).then(page =>\n        Promise.all(page.data.map(current =>\n          this._remove(current[this._id], params\n        )\n      )));\n    }\n\n    return this._remove(id, params);\n  }\n}\n\nmodule.exports = function init (options) {\n  return new Service(options);\n};\n\nmodule.exports.Service = Service;\n","const paramCounts = {\n  find: 1,\n  get: 2,\n  create: 2,\n  update: 3,\n  patch: 3,\n  remove: 2\n};\n\nfunction isObjectOrArray (value) {\n  return typeof value === 'object' && value !== null;\n}\n\nexports.validateArguments = function validateArguments (method, args) {\n  // Check if the last argument is a callback which are no longer supported\n  if (typeof args[args.length - 1] === 'function') {\n    throw new Error('Callbacks are no longer supported. Use Promises or async/await instead.');\n  }\n\n  const methodParamCount = paramCounts[method];\n\n  // Check the number of arguments and throw an error if too many are provided\n  if (methodParamCount && args.length > methodParamCount) {\n    throw new Error(`Too many arguments for '${method}' method`);\n  }\n\n  // `params` is always the last argument\n  const params = args[methodParamCount - 1];\n\n  // Check if `params` is an object (can be undefined though)\n  if (params !== undefined && !isObjectOrArray(params)) {\n    throw new Error(`Params for '${method}' method must be an object`);\n  }\n\n  // Validate other arguments for each method\n  switch (method) {\n    case 'create':\n      if (!isObjectOrArray(args[0])) {\n        throw new Error(`A data object must be provided to the 'create' method`);\n      }\n      break;\n    case 'get':\n    case 'remove':\n    case 'update':\n    case 'patch':\n      if (args[0] === undefined) {\n        throw new Error(`An id must be provided to the '${method}' method`);\n      }\n\n      if ((method === 'update' || method === 'patch') && !isObjectOrArray(args[1])) {\n        throw new Error(`A data object must be provided to the '${method}' method`);\n      }\n  }\n\n  return true;\n};\n","const utils = require('./utils');\nconst hooks = require('./hooks');\nconst args = require('./arguments');\nconst filterQuery = require('./filter-query');\n\nmodule.exports = Object.assign({}, utils, args, { hooks, filterQuery });\n","const { _ } = require('./utils');\n\n// Officially supported query parameters ($populate is kind of special)\nconst PROPERTIES = ['$sort', '$limit', '$skip', '$select', '$populate'];\n\nfunction parse (number) {\n  if (typeof number !== 'undefined') {\n    return Math.abs(parseInt(number, 10));\n  }\n}\n\n// Returns the pagination limit and will take into account the\n// default and max pagination settings\nfunction getLimit (limit, paginate) {\n  if (paginate && paginate.default) {\n    const lower = typeof limit === 'number' ? limit : paginate.default;\n    const upper = typeof paginate.max === 'number' ? paginate.max : Number.MAX_VALUE;\n\n    return Math.min(lower, upper);\n  }\n\n  return limit;\n}\n\n// Makes sure that $sort order is always converted to an actual number\nfunction convertSort (sort) {\n  if (typeof sort !== 'object' || Array.isArray(sort)) {\n    return sort;\n  }\n\n  const result = {};\n\n  Object.keys(sort).forEach(key => {\n    result[key] = typeof sort[key] === 'object'\n      ? sort[key] : parseInt(sort[key], 10);\n  });\n\n  return result;\n}\n\n// Converts Feathers special query parameters and pagination settings\n// and returns them separately a `filters` and the rest of the query\n// as `query`\nmodule.exports = function (query, paginate) {\n  let filters = {\n    $sort: convertSort(query.$sort),\n    $limit: getLimit(parse(query.$limit), paginate),\n    $skip: parse(query.$skip),\n    $select: query.$select,\n    $populate: query.$populate\n  };\n\n  return { filters, query: _.omit(query, ...PROPERTIES) };\n};\n","const { each, pick } = require('./utils')._;\n\n// To skip further hooks\nconst SKIP = exports.SKIP = typeof Symbol !== 'undefined'\n  ? Symbol('__feathersSkipHooks')\n  : '__feathersSkipHooks';\n\nconst convertGetOrRemove = ([ id, params = {} ]) => ({ id, params });\nconst convertUpdateOrPatch = ([ id, data, params = {} ]) => ({ id, data, params });\n\n// Converters from service method arguments to hook object properties\nexports.converters = {\n  find (args) {\n    const [ params = {} ] = args;\n\n    return { params };\n  },\n  create (args) {\n    const [ data, params = {} ] = args;\n\n    return { data, params };\n  },\n  get: convertGetOrRemove,\n  remove: convertGetOrRemove,\n  update: convertUpdateOrPatch,\n  patch: convertUpdateOrPatch\n};\n\n// Create a hook object for a method with arguments `args`\n// `data` is additional data that will be added\nexports.createHookObject = function createHookObject (method, args, data = {}) {\n  const hook = exports.converters[method](args);\n\n  Object.defineProperty(hook, 'toJSON', {\n    value () {\n      return pick(this, 'type', 'method', 'path',\n        'params', 'id', 'data', 'result', 'error');\n    }\n  });\n\n  return Object.assign(hook, data, {\n    method,\n    // A dynamic getter that returns the path of the service\n    get path () {\n      const { app, service } = data;\n\n      if (!service || !app || !app.services) {\n        return null;\n      }\n\n      return Object.keys(app.services)\n        .find(path => app.services[path] === service);\n    }\n  });\n};\n\n// Fallback used by `makeArguments` which usually won't be used\nexports.defaultMakeArguments = function defaultMakeArguments (hook) {\n  const result = [];\n\n  if (typeof hook.id !== 'undefined') {\n    result.push(hook.id);\n  }\n\n  if (hook.data) {\n    result.push(hook.data);\n  }\n\n  result.push(hook.params || {});\n\n  return result;\n};\n\n// Turns a hook object back into a list of arguments\n// to call a service method with\nexports.makeArguments = function makeArguments (hook) {\n  switch (hook.method) {\n    case 'find':\n      return [ hook.params ];\n    case 'get':\n    case 'remove':\n      return [ hook.id, hook.params ];\n    case 'update':\n    case 'patch':\n      return [ hook.id, hook.data, hook.params ];\n    case 'create':\n      return [ hook.data, hook.params ];\n  }\n\n  return exports.defaultMakeArguments(hook);\n};\n\n// Converts different hook registration formats into the\n// same internal format\nexports.convertHookData = function convertHookData (obj) {\n  var hook = {};\n\n  if (Array.isArray(obj)) {\n    hook = { all: obj };\n  } else if (typeof obj !== 'object') {\n    hook = { all: [ obj ] };\n  } else {\n    each(obj, function (value, key) {\n      hook[key] = !Array.isArray(value) ? [ value ] : value;\n    });\n  }\n\n  return hook;\n};\n\n// Duck-checks a given object to be a hook object\n// A valid hook object has `type` and `method`\nexports.isHookObject = function isHookObject (hookObject) {\n  return typeof hookObject === 'object' &&\n    typeof hookObject.method === 'string' &&\n    typeof hookObject.type === 'string';\n};\n\n// Returns all service and application hooks combined\n// for a given method and type `appLast` sets if the hooks\n// from `app` should be added last (or first by default)\nexports.getHooks = function getHooks (app, service, type, method, appLast = false) {\n  const appHooks = app.__hooks[type][method] || [];\n  const serviceHooks = service.__hooks[type][method] || [];\n\n  if (appLast) {\n    // Run hooks in the order of service -> app -> finally\n    return serviceHooks.concat(appHooks);\n  }\n\n  return appHooks.concat(serviceHooks);\n};\n\nexports.processHooks = function processHooks (hooks, initialHookObject) {\n  let hookObject = initialHookObject;\n  let updateCurrentHook = current => {\n    // Either use the returned hook object or the current\n    // hook object from the chain if the hook returned undefined\n    if (current) {\n      if (current === SKIP) {\n        return SKIP;\n      }\n\n      if (!exports.isHookObject(current)) {\n        throw new Error(`${hookObject.type} hook for '${hookObject.method}' method returned invalid hook object`);\n      }\n\n      hookObject = current;\n    }\n\n    return hookObject;\n  };\n  // First step of the hook chain with the initial hook object\n  let promise = Promise.resolve(hookObject);\n\n  // Go through all hooks and chain them into our promise\n  hooks.forEach(fn => {\n    const hook = fn.bind(this);\n\n    if (hook.length === 2) { // function(hook, next)\n      promise = promise.then(hookObject => hookObject === SKIP ? SKIP : new Promise((resolve, reject) => {\n        hook(hookObject, (error, result) =>\n          error ? reject(error) : resolve(result)\n        );\n      }));\n    } else { // function(hook)\n      promise = promise.then(hookObject => hookObject === SKIP ? SKIP : hook(hookObject));\n    }\n\n    // Use the returned hook object or the old one\n    promise = promise.then(updateCurrentHook);\n  });\n\n  return promise\n    .then(() => hookObject)\n    .catch(error => {\n      // Add the hook information to any errors\n      error.hook = hookObject;\n      throw error;\n    });\n};\n\n// Add `.hooks` functionality to an object\nexports.enableHooks = function enableHooks (obj, methods, types) {\n  if (typeof obj.hooks === 'function') {\n    return obj;\n  }\n\n  let __hooks = {};\n\n  types.forEach(type => {\n    // Initialize properties where hook functions are stored\n    __hooks[type] = {};\n  });\n\n  // Add non-enumerable `__hooks` property to the object\n  Object.defineProperty(obj, '__hooks', {\n    value: __hooks\n  });\n\n  return Object.assign(obj, {\n    hooks (allHooks) {\n      each(allHooks, (obj, type) => {\n        if (!this.__hooks[type]) {\n          throw new Error(`'${type}' is not a valid hook type`);\n        }\n\n        const hooks = exports.convertHookData(obj);\n\n        each(hooks, (value, method) => {\n          if (method !== 'all' && methods.indexOf(method) === -1) {\n            throw new Error(`'${method}' is not a valid hook method`);\n          }\n        });\n\n        methods.forEach(method => {\n          const myHooks = this.__hooks[type][method] ||\n            (this.__hooks[type][method] = []);\n\n          if (hooks.all) {\n            myHooks.push.apply(myHooks, hooks.all);\n          }\n\n          if (hooks[method]) {\n            myHooks.push.apply(myHooks, hooks[method]);\n          }\n        });\n      });\n\n      return this;\n    }\n  });\n};\n","// Removes all leading and trailing slashes from a path\nexports.stripSlashes = function stripSlashes (name) {\n  return name.replace(/^(\\/*)|(\\/*)$/g, '');\n};\n\n// A set of lodash-y utility functions that use ES6\nconst _ = exports._ = {\n  each (obj, callback) {\n    if (obj && typeof obj.forEach === 'function') {\n      obj.forEach(callback);\n    } else if (_.isObject(obj)) {\n      Object.keys(obj).forEach(key => callback(obj[key], key));\n    }\n  },\n\n  some (value, callback) {\n    return Object.keys(value)\n      .map(key => [ value[key], key ])\n      .some(([val, key]) => callback(val, key));\n  },\n\n  every (value, callback) {\n    return Object.keys(value)\n      .map(key => [ value[key], key ])\n      .every(([val, key]) => callback(val, key));\n  },\n\n  keys (obj) {\n    return Object.keys(obj);\n  },\n\n  values (obj) {\n    return _.keys(obj).map(key => obj[key]);\n  },\n\n  isMatch (obj, item) {\n    return _.keys(item).every(key => obj[key] === item[key]);\n  },\n\n  isEmpty (obj) {\n    return _.keys(obj).length === 0;\n  },\n\n  isObject (item) {\n    return (typeof item === 'object' && !Array.isArray(item) && item !== null);\n  },\n\n  extend (...args) {\n    return Object.assign(...args);\n  },\n\n  omit (obj, ...keys) {\n    const result = _.extend({}, obj);\n    keys.forEach(key => delete result[key]);\n    return result;\n  },\n\n  pick (source, ...keys) {\n    const result = {};\n    keys.forEach(key => {\n      if (source[key] !== undefined) {\n        result[key] = source[key];\n      }\n    });\n    return result;\n  },\n\n  // Recursively merge the source object into the target object\n  merge (target, source) {\n    if (_.isObject(target) && _.isObject(source)) {\n      Object.keys(source).forEach(key => {\n        if (_.isObject(source[key])) {\n          if (!target[key]) {\n            Object.assign(target, { [key]: {} });\n          }\n\n          _.merge(target[key], source[key]);\n        } else {\n          Object.assign(target, { [key]: source[key] });\n        }\n      });\n    }\n    return target;\n  }\n};\n\n// Return a function that filters a result object or array\n// and picks only the fields passed as `params.query.$select`\n// and additional `otherFields`\nexports.select = function select (params, ...otherFields) {\n  const fields = params && params.query && params.query.$select;\n\n  if (Array.isArray(fields) && otherFields.length) {\n    fields.push(...otherFields);\n  }\n\n  const convert = result => {\n    if (!Array.isArray(fields)) {\n      return result;\n    }\n\n    return _.pick(result, ...fields);\n  };\n\n  return result => {\n    if (Array.isArray(result)) {\n      return result.map(convert);\n    }\n\n    return convert(result);\n  };\n};\n\n// An in-memory sorting function according to the\n// $sort special query parameter\nexports.sorter = function sorter ($sort) {\n  return function (first, second) {\n    let comparator = 0;\n    _.each($sort, (modifier, key) => {\n      modifier = parseInt(modifier, 10);\n\n      if (first[key] < second[key]) {\n        comparator -= 1 * modifier;\n      }\n\n      if (first[key] > second[key]) {\n        comparator += 1 * modifier;\n      }\n    });\n    return comparator;\n  };\n};\n\n// Duck-checks if an object looks like a promise\nexports.isPromise = function isPromise (result) {\n  return _.isObject(result) &&\n    typeof result.then === 'function';\n};\n\nexports.makeUrl = function makeUrl (path, app = {}) {\n  const get = typeof app.get === 'function' ? app.get.bind(app) : () => {};\n  const env = get('env') || process.env.NODE_ENV;\n  const host = get('host') || process.env.HOST_NAME || 'localhost';\n  const protocol = (env === 'development' || env === 'test' || (env === undefined)) ? 'http' : 'https';\n  const PORT = get('port') || process.env.PORT || 3030;\n  const port = (env === 'development' || env === 'test' || (env === undefined)) ? `:${PORT}` : '';\n\n  path = path || '';\n\n  return `${protocol}://${host}${port}/${exports.stripSlashes(path)}`;\n};\n","const debug = require('debug')('@feathersjs/errors');\n\nfunction FeathersError (msg, name, code, className, data) {\n  msg = msg || 'Error';\n\n  let errors;\n  let message;\n  let newData;\n\n  if (msg instanceof Error) {\n    message = msg.message || 'Error';\n\n    // NOTE (EK): This is typically to handle validation errors\n    if (msg.errors) {\n      errors = msg.errors;\n    }\n  } else if (typeof msg === 'object') { // Support plain old objects\n    message = msg.message || 'Error';\n    data = msg;\n  } else { // message is just a string\n    message = msg;\n  }\n\n  if (data) {\n    // NOTE(EK): To make sure that we are not messing\n    // with immutable data, just make a copy.\n    // https://github.com/feathersjs/errors/issues/19\n    newData = JSON.parse(JSON.stringify(data));\n\n    if (newData.errors) {\n      errors = newData.errors;\n      delete newData.errors;\n    } else if (data.errors) {\n      // The errors property from data could be\n      // stripped away while cloning resulting newData not to have it\n      // For example: when cloning arrays this property\n      errors = JSON.parse(JSON.stringify(data.errors));\n    }\n  }\n\n  // NOTE (EK): Babel doesn't support this so\n  // we have to pass in the class name manually.\n  // this.name = this.constructor.name;\n  this.type = 'FeathersError';\n  this.name = name;\n  this.message = message;\n  this.code = code;\n  this.className = className;\n  this.data = newData;\n  this.errors = errors || {};\n\n  debug(`${this.name}(${this.code}): ${this.message}`);\n  debug(this.errors);\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, FeathersError);\n  } else {\n    this.stack = (new Error()).stack;\n  }\n}\n\nfunction inheritsFrom (Child, Parent) {\n  Child.prototype = Object.create(Parent.prototype);\n  Child.prototype.constructor = Child;\n}\n\ninheritsFrom(FeathersError, Error);\n\n// NOTE (EK): A little hack to get around `message` not\n// being included in the default toJSON call.\nObject.defineProperty(FeathersError.prototype, 'toJSON', {\n  value: function () {\n    return {\n      name: this.name,\n      message: this.message,\n      code: this.code,\n      className: this.className,\n      data: this.data,\n      errors: this.errors\n    };\n  }\n});\n\n// 400 - Bad Request\nfunction BadRequest (message, data) {\n  FeathersError.call(this, message, 'BadRequest', 400, 'bad-request', data);\n}\n\ninheritsFrom(BadRequest, FeathersError);\n\n// 401 - Not Authenticated\nfunction NotAuthenticated (message, data) {\n  FeathersError.call(this, message, 'NotAuthenticated', 401, 'not-authenticated', data);\n}\n\ninheritsFrom(NotAuthenticated, FeathersError);\n\n// 402 - Payment Error\nfunction PaymentError (message, data) {\n  FeathersError.call(this, message, 'PaymentError', 402, 'payment-error', data);\n}\n\ninheritsFrom(PaymentError, FeathersError);\n\n// 403 - Forbidden\nfunction Forbidden (message, data) {\n  FeathersError.call(this, message, 'Forbidden', 403, 'forbidden', data);\n}\n\ninheritsFrom(Forbidden, FeathersError);\n\n// 404 - Not Found\nfunction NotFound (message, data) {\n  FeathersError.call(this, message, 'NotFound', 404, 'not-found', data);\n}\n\ninheritsFrom(NotFound, FeathersError);\n\n// 405 - Method Not Allowed\nfunction MethodNotAllowed (message, data) {\n  FeathersError.call(this, message, 'MethodNotAllowed', 405, 'method-not-allowed', data);\n}\n\ninheritsFrom(MethodNotAllowed, FeathersError);\n\n// 406 - Not Acceptable\nfunction NotAcceptable (message, data) {\n  FeathersError.call(this, message, 'NotAcceptable', 406, 'not-acceptable', data);\n}\n\ninheritsFrom(NotAcceptable, FeathersError);\n\n// 408 - Timeout\nfunction Timeout (message, data) {\n  FeathersError.call(this, message, 'Timeout', 408, 'timeout', data);\n}\n\ninheritsFrom(Timeout, FeathersError);\n\n// 409 - Conflict\nfunction Conflict (message, data) {\n  FeathersError.call(this, message, 'Conflict', 409, 'conflict', data);\n}\n\ninheritsFrom(Conflict, FeathersError);\n\n// 411 - Length Required\nfunction LengthRequired (message, data) {\n  FeathersError.call(this, message, 'LengthRequired', 411, 'length-required', data);\n}\n\ninheritsFrom(LengthRequired, FeathersError);\n\n// 422 Unprocessable\nfunction Unprocessable (message, data) {\n  FeathersError.call(this, message, 'Unprocessable', 422, 'unprocessable', data);\n}\n\ninheritsFrom(Unprocessable, FeathersError);\n\n// 429 Too Many Requests\nfunction TooManyRequests (message, data) {\n  FeathersError.call(this, message, 'TooManyRequests', 429, 'too-many-requests', data);\n}\n\ninheritsFrom(TooManyRequests, FeathersError);\n\n// 500 - General Error\nfunction GeneralError (message, data) {\n  FeathersError.call(this, message, 'GeneralError', 500, 'general-error', data);\n}\n\ninheritsFrom(GeneralError, FeathersError);\n\n// 501 - Not Implemented\nfunction NotImplemented (message, data) {\n  FeathersError.call(this, message, 'NotImplemented', 501, 'not-implemented', data);\n}\n\ninheritsFrom(NotImplemented, FeathersError);\n\n// 502 - Bad Gateway\nfunction BadGateway (message, data) {\n  FeathersError.call(this, message, 'BadGateway', 502, 'bad-gateway', data);\n}\n\ninheritsFrom(BadGateway, FeathersError);\n\n// 503 - Unavailable\nfunction Unavailable (message, data) {\n  FeathersError.call(this, message, 'Unavailable', 503, 'unavailable', data);\n}\n\ninheritsFrom(Unavailable, FeathersError);\n\nconst errors = {\n  FeathersError,\n  BadRequest,\n  NotAuthenticated,\n  PaymentError,\n  Forbidden,\n  NotFound,\n  MethodNotAllowed,\n  NotAcceptable,\n  Timeout,\n  Conflict,\n  LengthRequired,\n  Unprocessable,\n  TooManyRequests,\n  GeneralError,\n  NotImplemented,\n  BadGateway,\n  Unavailable,\n  400: BadRequest,\n  401: NotAuthenticated,\n  402: PaymentError,\n  403: Forbidden,\n  404: NotFound,\n  405: MethodNotAllowed,\n  406: NotAcceptable,\n  408: Timeout,\n  409: Conflict,\n  411: LengthRequired,\n  422: Unprocessable,\n  429: TooManyRequests,\n  500: GeneralError,\n  501: NotImplemented,\n  502: BadGateway,\n  503: Unavailable\n};\n\nfunction convert (error) {\n  if (!error) {\n    return error;\n  }\n\n  const FeathersError = errors[error.name];\n  const result = FeathersError\n    ? new FeathersError(error.message, error.data)\n    : new Error(error.message || error);\n\n  if (typeof error === 'object') {\n    Object.assign(result, error);\n  }\n\n  return result;\n}\n\nmodule.exports = Object.assign({ convert }, errors);\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  for (var i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","'use strict';\n\n/**\n * Module dependenices\n */\n\nconst clone = require('shallow-clone');\nconst typeOf = require('kind-of');\n\nfunction cloneDeep(val, instanceClone) {\n  switch (typeOf(val)) {\n    case 'object':\n      return cloneObjectDeep(val, instanceClone);\n    case 'array':\n      return cloneArrayDeep(val, instanceClone);\n    default: {\n      return clone(val);\n    }\n  }\n}\n\nfunction cloneObjectDeep(val, instanceClone) {\n  if (typeof instanceClone === 'function') {\n    return instanceClone(val);\n  }\n  if (typeOf(val) === 'object') {\n    const res = new val.constructor();\n    for (const key in val) {\n      res[key] = cloneDeep(val[key], instanceClone);\n    }\n    return res;\n  }\n  return val;\n}\n\nfunction cloneArrayDeep(val, instanceClone) {\n  const res = new val.constructor(val.length);\n  for (let i = 0; i < val.length; i++) {\n    res[i] = cloneDeep(val[i], instanceClone);\n  }\n  return res;\n}\n\n/**\n * Expose `cloneDeep`\n */\n\nmodule.exports = cloneDeep;\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = Object.prototype.toString;\n\nmodule.exports = function kindOf(val) {\n  if (val === void 0) return 'undefined';\n  if (val === null) return 'null';\n\n  var type = typeof val;\n  if (type === 'boolean') return 'boolean';\n  if (type === 'string') return 'string';\n  if (type === 'number') return 'number';\n  if (type === 'symbol') return 'symbol';\n  if (type === 'function') {\n    return isGeneratorFn(val) ? 'generatorfunction' : 'function';\n  }\n\n  if (isArray(val)) return 'array';\n  if (isBuffer(val)) return 'buffer';\n  if (isArguments(val)) return 'arguments';\n  if (isDate(val)) return 'date';\n  if (isError(val)) return 'error';\n  if (isRegexp(val)) return 'regexp';\n\n  switch (ctorName(val)) {\n    case 'Symbol': return 'symbol';\n    case 'Promise': return 'promise';\n\n    // Set, Map, WeakSet, WeakMap\n    case 'WeakMap': return 'weakmap';\n    case 'WeakSet': return 'weakset';\n    case 'Map': return 'map';\n    case 'Set': return 'set';\n\n    // 8-bit typed arrays\n    case 'Int8Array': return 'int8array';\n    case 'Uint8Array': return 'uint8array';\n    case 'Uint8ClampedArray': return 'uint8clampedarray';\n\n    // 16-bit typed arrays\n    case 'Int16Array': return 'int16array';\n    case 'Uint16Array': return 'uint16array';\n\n    // 32-bit typed arrays\n    case 'Int32Array': return 'int32array';\n    case 'Uint32Array': return 'uint32array';\n    case 'Float32Array': return 'float32array';\n    case 'Float64Array': return 'float64array';\n  }\n\n  if (isGeneratorObj(val)) {\n    return 'generator';\n  }\n\n  // Non-plain objects\n  type = toString.call(val);\n  switch (type) {\n    case '[object Object]': return 'object';\n    // iterators\n    case '[object Map Iterator]': return 'mapiterator';\n    case '[object Set Iterator]': return 'setiterator';\n    case '[object String Iterator]': return 'stringiterator';\n    case '[object Array Iterator]': return 'arrayiterator';\n  }\n\n  // other\n  return type.slice(8, -1).toLowerCase().replace(/\\s/g, '');\n};\n\nfunction ctorName(val) {\n  return val.constructor ? val.constructor.name : null;\n}\n\nfunction isArray(val) {\n  if (Array.isArray) return Array.isArray(val);\n  return val instanceof Array;\n}\n\nfunction isError(val) {\n  return val instanceof Error || (typeof val.message === 'string' && val.constructor && typeof val.constructor.stackTraceLimit === 'number');\n}\n\nfunction isDate(val) {\n  if (val instanceof Date) return true;\n  return typeof val.toDateString === 'function'\n    && typeof val.getDate === 'function'\n    && typeof val.setDate === 'function';\n}\n\nfunction isRegexp(val) {\n  if (val instanceof RegExp) return true;\n  return typeof val.flags === 'string'\n    && typeof val.ignoreCase === 'boolean'\n    && typeof val.multiline === 'boolean'\n    && typeof val.global === 'boolean';\n}\n\nfunction isGeneratorFn(name, val) {\n  return ctorName(name) === 'GeneratorFunction';\n}\n\nfunction isGeneratorObj(val) {\n  return typeof val.throw === 'function'\n    && typeof val.return === 'function'\n    && typeof val.next === 'function';\n}\n\nfunction isArguments(val) {\n  try {\n    if (typeof val.length === 'number' && typeof val.callee === 'function') {\n      return true;\n    }\n  } catch (err) {\n    if (err.message.indexOf('callee') !== -1) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * If you need to support Safari 5-7 (8-10 yr-old browser),\n * take a look at https://github.com/feross/is-buffer\n */\n\nfunction isBuffer(val) {\n  if (val.constructor && typeof val.constructor.isBuffer === 'function') {\n    return val.constructor.isBuffer(val);\n  }\n  return false;\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/*!\n * shallow-clone <https://github.com/jonschlinkert/shallow-clone>\n *\n * Copyright (c) 2015-2018, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nconst valueOf = Symbol.prototype.valueOf;\nconst typeOf = require('kind-of');\n\nfunction clone(val, deep) {\n  switch (typeOf(val)) {\n    case 'array':\n      return val.slice();\n    case 'object':\n      return Object.assign({}, val);\n    case 'date':\n      return new val.constructor(+val);\n    case 'map':\n      return new Map(val);\n    case 'set':\n      return new Set(val);\n    case 'buffer':\n      return cloneBuffer(val);\n    case 'symbol':\n      return cloneSymbol(val);\n    case 'arraybuffer':\n      return cloneArrayBuffer(val);\n    case 'float32array':\n    case 'float64array':\n    case 'int16array':\n    case 'int32array':\n    case 'int8array':\n    case 'uint16array':\n    case 'uint32array':\n    case 'uint8clampedarray':\n    case 'uint8array':\n      return cloneTypedArray(val);\n    case 'regexp':\n      return cloneRegExp(val);\n    case 'error':\n      return Object.create(val);\n    default: {\n      return val;\n    }\n  }\n}\n\nfunction cloneRegExp(val) {\n  const re = new val.constructor(val.source, /\\w+$/.exec(val));\n  re.lastIndex = val.lastIndex;\n  return re;\n}\n\nfunction cloneArrayBuffer(val) {\n  const res = new val.constructor(val.byteLength);\n  new Uint8Array(res).set(new Uint8Array(val));\n  return res;\n}\n\nfunction cloneTypedArray(val, deep) {\n  return new val.constructor(val.buffer, val.byteOffset, val.length);\n}\n\nfunction cloneBuffer(val) {\n  const len = val.length;\n  const buf = Buffer.allocUnsafe ? Buffer.allocUnsafe(len) : new Buffer(len);\n  val.copy(buf);\n  return buf;\n}\n\nfunction cloneSymbol(val) {\n  return valueOf ? Object(valueOf.call(val)) : {};\n}\n\n/**\n * Expose `clone`\n */\n\nmodule.exports = clone;\n","/*\n * Sift 3.x\n *\n * Copryright 2015, Craig Condon\n * Licensed under MIT\n *\n * Filter JavaScript objects with mongodb queries\n */\n\n(function() {\n\n  'use strict';\n\n  /**\n   */\n\n  function isFunction(value) {\n    return typeof value === 'function';\n  }\n\n  /**\n   */\n\n  function isArray(value) {\n    return Object.prototype.toString.call(value) === '[object Array]';\n  }\n\n  /**\n   */\n\n  function comparable(value) {\n    if (value instanceof Date) {\n      return value.getTime();\n    } else if (isArray(value)) {\n      return value.map(comparable);\n    } else if (value && typeof value.toJSON === 'function') {\n      return value.toJSON();\n    } else {\n      return value;\n    }\n  }\n\n  function get(obj, key) {\n    return isFunction(obj.get) ? obj.get(key) : obj[key];\n  }\n\n  /**\n   */\n\n  function or(validator) {\n    return function(a, b) {\n      if (!isArray(b) || !b.length) {\n        return validator(a, b);\n      }\n      for (var i = 0, n = b.length; i < n; i++) {\n        if (validator(a, get(b,i))) return true;\n      }\n      return false;\n    }\n  }\n\n  /**\n   */\n\n  function and(validator) {\n    return function(a, b) {\n      if (!isArray(b) || !b.length) {\n        return validator(a, b);\n      }\n      for (var i = 0, n = b.length; i < n; i++) {\n        if (!validator(a, get(b, i))) return false;\n      }\n      return true;\n    };\n  }\n\n  function validate(validator, b, k, o) {\n    return validator.v(validator.a, b, k, o);\n  }\n\n  var OPERATORS = {\n\n    /**\n     */\n\n    $eq: or(function(a, b) {\n      return a(b);\n    }),\n\n    /**\n     */\n\n    $ne: and(function(a, b) {\n      return !a(b);\n    }),\n\n    /**\n     */\n\n    $gt: or(function(a, b) {\n      return sift.compare(comparable(b), a) > 0;\n    }),\n\n    /**\n     */\n\n    $gte: or(function(a, b) {\n      return sift.compare(comparable(b), a) >= 0;\n    }),\n\n    /**\n     */\n\n    $lt: or(function(a, b) {\n      return sift.compare(comparable(b), a) < 0;\n    }),\n\n    /**\n     */\n\n    $lte: or(function(a, b) {\n      return sift.compare(comparable(b), a) <= 0;\n    }),\n\n    /**\n     */\n\n    $mod: or(function(a, b) {\n      return b % a[0] == a[1];\n    }),\n\n    /**\n     */\n\n    $in: function(a, b) {\n\n      if (b instanceof Array) {\n        for (var i = b.length; i--;) {\n          if (~a.indexOf(comparable(get(b, i)))) {\n            return true;\n          }\n        }\n      } else {\n        var comparableB = comparable(b);\n        if (comparableB === b && typeof b === 'object') {\n          for (var i = a.length; i--;) {\n            if (String(a[i]) === String(b) && String(b) !== '[object Object]') {\n              return true;\n            }\n          }\n        }\n\n        /*\n          Handles documents that are undefined, whilst also\n          having a 'null' element in the parameters to $in.\n        */\n        if (typeof comparableB == 'undefined') {\n          for (var i = a.length; i--;) {\n            if (a[i] == null) {\n              return true;\n            }\n          }\n        }\n\n        /*\n          Handles the case of {'field': {$in: [/regexp1/, /regexp2/, ...]}}\n        */\n        for (var i = a.length; i--;) {\n          var validator = createRootValidator(get(a, i), undefined);\n          var result = validate(validator, b, i, a);\n          if ((result) && (String(result) !== '[object Object]') && (String(b) !== '[object Object]')) {\n            return true;\n          }\n        }\n\n        return !!~a.indexOf(comparableB);\n      }\n\n      return false;\n    },\n\n    /**\n     */\n\n    $nin: function(a, b, k, o) {\n      return !OPERATORS.$in(a, b, k, o);\n    },\n\n    /**\n     */\n\n    $not: function(a, b, k, o) {\n      return !validate(a, b, k, o);\n    },\n\n    /**\n     */\n\n    $type: function(a, b) {\n      return b != void 0 ? b instanceof a || b.constructor == a : false;\n     },\n\n    /**\n     */\n\n    $all: function(a, b, k, o) {\n      return OPERATORS.$and(a, b, k, o);\n    },\n\n    /**\n     */\n\n    $size: function(a, b) {\n      return b ? a === b.length : false;\n    },\n\n    /**\n     */\n\n    $or: function(a, b, k, o) {\n      for (var i = 0, n = a.length; i < n; i++) if (validate(get(a, i), b, k, o)) return true;\n      return false;\n    },\n\n    /**\n     */\n\n    $nor: function(a, b, k, o) {\n      return !OPERATORS.$or(a, b, k, o);\n    },\n\n    /**\n     */\n\n    $and: function(a, b, k, o) {\n      for (var i = 0, n = a.length; i < n; i++) {\n        if (!validate(get(a, i), b, k, o)) {\n          return false;\n        }\n      }\n      return true;\n    },\n\n    /**\n     */\n\n    $regex: or(function(a, b) {\n      return typeof b === 'string' && a.test(b);\n    }),\n\n    /**\n     */\n\n    $where: function(a, b, k, o) {\n      return a.call(b, b, k, o);\n    },\n\n    /**\n     */\n\n    $elemMatch: function(a, b, k, o) {\n      if (isArray(b)) {\n        return !!~search(b, a);\n      }\n      return validate(a, b, k, o);\n    },\n\n    /**\n     */\n\n    $exists: function(a, b, k, o) {\n      return o.hasOwnProperty(k) === a;\n    }\n  };\n\n  /**\n   */\n\n  var prepare = {\n\n    /**\n     */\n\n    $eq: function(a) {\n\n      if (a instanceof RegExp) {\n        return function(b) {\n          return typeof b === 'string' && a.test(b);\n        };\n      } else if (a instanceof Function) {\n        return a;\n      } else if (isArray(a) && !a.length) {\n        // Special case of a == []\n        return function(b) {\n          return (isArray(b) && !b.length);\n        };\n      } else if (a === null){\n        return function(b){\n          //will match both null and undefined\n          return b == null;\n        }\n      }\n\n      return function(b) {\n        return sift.compare(comparable(b), a) === 0;\n      };\n    },\n\n    /**\n     */\n\n    $ne: function(a) {\n      return prepare.$eq(a);\n    },\n\n    /**\n     */\n\n    $and: function(a) {\n      return a.map(parse);\n    },\n\n    /**\n     */\n\n    $all: function(a) {\n      return prepare.$and(a);\n    },\n\n    /**\n     */\n\n    $or: function(a) {\n      return a.map(parse);\n    },\n\n    /**\n     */\n\n    $nor: function(a) {\n      return a.map(parse);\n    },\n\n    /**\n     */\n\n    $not: function(a) {\n      return parse(a);\n    },\n\n    /**\n     */\n\n    $regex: function(a, query) {\n      return new RegExp(a, query.$options);\n    },\n\n    /**\n     */\n\n    $where: function(a) {\n      return typeof a === 'string' ? new Function('obj', 'return ' + a) : a;\n    },\n\n    /**\n     */\n\n    $elemMatch: function(a) {\n      return parse(a);\n    },\n\n    /**\n     */\n\n    $exists: function(a) {\n      return !!a;\n    }\n  };\n\n  /**\n   */\n\n  function search(array, validator) {\n\n    for (var i = 0; i < array.length; i++) {\n      var result = get(array, i);\n      if (validate(validator, get(array, i))) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  /**\n   */\n\n  function createValidator(a, validate) {\n    return { a: a, v: validate };\n  }\n\n  /**\n   */\n\n  function nestedValidator(a, b) {\n    var values  = [];\n    findValues(b, a.k, 0, b, values);\n\n    if (values.length === 1) {\n      var first = values[0];\n      return validate(a.nv, first[0], first[1], first[2]);\n    }\n\n    for (var i = 0; i < values.length; i++) {\n      var result = values[i];\n      if (validate(a.nv, result[0], result[1], result[2])) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   */\n\n  function findValues(current, keypath, index, object, values) {\n\n    if (index === keypath.length || current == void 0) {\n      values.push([current, keypath[index - 1], object]);\n      return;\n    }\n\n    var k = get(keypath, index);\n\n    // ensure that if current is an array, that the current key\n    // is NOT an array index. This sort of thing needs to work:\n    // sift({'foo.0':42}, [{foo: [42]}]);\n    if (isArray(current) && isNaN(Number(k))) {\n      for (var i = 0, n = current.length; i < n; i++) {\n        findValues(get(current, i), keypath, index, current, values);\n      }\n    } else {\n      findValues(get(current, k), keypath, index + 1, current, values);\n    }\n  }\n\n  /**\n   */\n\n  function createNestedValidator(keypath, a) {\n    return { a: { k: keypath, nv: a }, v: nestedValidator };\n  }\n\n  /**\n   * flatten the query\n   */\n\n  function isVanillaObject(value) {\n    return value && value.constructor === Object;\n  }\n\n  function parse(query) {\n    query = comparable(query);\n\n    if (!query || !isVanillaObject(query)) { // cross browser support\n      query = { $eq: query };\n    }\n\n    var validators = [];\n\n    for (var key in query) {\n      var a = query[key];\n\n      if (key === '$options') {\n        continue;\n      }\n\n      if (OPERATORS[key]) {\n        if (prepare[key]) a = prepare[key](a, query);\n        validators.push(createValidator(comparable(a), OPERATORS[key]));\n      } else {\n\n        if (key.charCodeAt(0) === 36) {\n          throw new Error('Unknown operation ' + key);\n        }\n\n        validators.push(createNestedValidator(key.split('.'), parse(a)));\n      }\n    }\n\n    return validators.length === 1 ? validators[0] : createValidator(validators, OPERATORS.$and);\n  }\n\n  /**\n   */\n\n  function createRootValidator(query, getter) {\n    var validator = parse(query);\n    if (getter) {\n      validator = {\n        a: validator,\n        v: function(a, b, k, o) {\n          return validate(a, getter(b), k, o);\n        }\n      };\n    }\n    return validator;\n  }\n\n  /**\n   */\n\n  function sift(query, array, getter) {\n\n    if (isFunction(array)) {\n      getter = array;\n      array  = void 0;\n    }\n\n    var validator = createRootValidator(query, getter);\n\n    function filter(b, k, o) {\n      return validate(validator, b, k, o);\n    }\n\n    if (array) {\n      return array.filter(filter);\n    }\n\n    return filter;\n  }\n\n  /**\n   */\n\n  sift.use = function(plugin) {\n    if (isFunction(plugin)) return plugin(sift);\n    for (var key in plugin) {\n      /* istanbul ignore else */\n      if (key.charCodeAt(0) === 36) {\n        OPERATORS[key] = plugin[key];\n      }\n    }\n  };\n\n  /**\n   */\n\n  sift.indexOf = function(query, array, getter) {\n    return search(array, createRootValidator(query, getter));\n  };\n\n  /**\n   */\n\n  sift.compare = function(a, b) {\n    if(a===b) return 0;\n    if(typeof a === typeof b) {\n      if (a > b) {\n        return 1;\n      }\n      if (a < b) {\n        return -1;\n      }\n    }\n  };\n\n  /* istanbul ignore next */\n  if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\n    Object.defineProperty(exports, \"__esModule\", {\n      value: true\n    });\n\n    module.exports = sift;\n    exports['default'] = module.exports.default = sift;\n  }\n\n  /* istanbul ignore next */\n  if (typeof window !== 'undefined') {\n    window.sift = sift;\n  }\n})();\n","/* global define */\n/**\n * A base object for ECMAScript 5 style prototypal inheritance.\n *\n * @see https://github.com/rauschma/proto-js/\n * @see http://ejohn.org/blog/simple-javascript-inheritance/\n * @see http://uxebu.com/blog/2011/02/23/object-based-inheritance-for-ecmascript-5/\n */\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory();\n  } else {\n    root.Proto = factory();\n  }\n}(this, function () {\n  var HAS_SYMBOLS = typeof Object.getOwnPropertySymbols === 'function';\n\n  function makeSuper (_super, old, name, fn) {\n    var isFunction = typeof old === 'function';\n    var newMethod = function () {\n      var tmp = this._super;\n\n      // Add a new ._super() method that is the same method\n      // but either pointing to the prototype method\n      // or to the overwritten method\n      this._super = isFunction ? old : _super[name];\n\n      // The method only need to be bound temporarily, so we\n      // remove it when we're done executing\n      var ret = fn.apply(this, arguments);\n\n      this._super = tmp;\n\n      return ret;\n    };\n\n    if (isFunction) {\n      Object.getOwnPropertySymbols(old).forEach(function (name) {\n        newMethod[name] = old[name];\n      });\n    }\n\n    return newMethod;\n  }\n\n  return {\n    /**\n     * Create a new object using Object.create. The arguments will be\n     * passed to the new instances init method or to a method name set in\n     * __init.\n     */\n    create: function () {\n      var instance = Object.create(this);\n      var init = typeof instance.__init === 'string' ? instance.__init : 'init';\n\n      if (typeof instance[init] === 'function') {\n        instance[init].apply(instance, arguments);\n      }\n      return instance;\n    },\n    /**\n     * Mixin a given set of properties\n     * @param prop The properties to mix in\n     * @param obj [optional]\n     * The object to add the mixin\n     */\n    mixin: function (prop, obj) {\n      var self = obj || this;\n      var fnTest = /\\b_super\\b/;\n      var _super = Object.getPrototypeOf(self) || self.prototype;\n      var descriptors = {};\n      var proto = prop;\n      var processProperty = function (name) {\n        if (!descriptors[name]) {\n          descriptors[name] = Object.getOwnPropertyDescriptor(proto, name);\n        }\n      };\n\n      // Collect all property descriptors\n      do {\n        Object.getOwnPropertyNames(proto).forEach(processProperty);\n\n        if (HAS_SYMBOLS) {\n          Object.getOwnPropertySymbols(proto).forEach(processProperty);\n        }\n      } while ((proto = Object.getPrototypeOf(proto)) && Object.getPrototypeOf(proto));\n\n      var processDescriptor = function (name) {\n        var descriptor = descriptors[name];\n\n        if (typeof descriptor.value === 'function' && fnTest.test(descriptor.value)) {\n          descriptor.value = makeSuper(_super, self[name], name, descriptor.value);\n        }\n\n        Object.defineProperty(self, name, descriptor);\n      };\n\n      Object.keys(descriptors).forEach(processDescriptor);\n\n      if (HAS_SYMBOLS) {\n        Object.getOwnPropertySymbols(descriptors).forEach(processDescriptor);\n      }\n\n      return self;\n    },\n    /**\n     * Extend the current or a given object with the given property and return the extended object.\n     * @param prop The properties to extend with\n     * @param obj [optional] The object to extend from\n     * @returns The extended object\n     */\n    extend: function (prop, obj) {\n      return this.mixin(prop, Object.create(obj || this));\n    },\n    /**\n     * Return a callback function with this set to the current or a given context object.\n     * @param name Name of the method to proxy\n     * @param args... [optional] Arguments to use for partial application\n     */\n    proxy: function (name) {\n      var fn = this[name];\n      var args = Array.prototype.slice.call(arguments, 1);\n\n      args.unshift(this);\n      return fn.bind.apply(fn, args);\n    }\n  };\n}));\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n"],"sourceRoot":""}